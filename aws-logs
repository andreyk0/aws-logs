#!/bin/bash

AWSE=''
[ -z "$AWS_ACCESS_KEY_ID"     ] || AWSE="$AWSE -e AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID"
[ -z "$AWS_SECRET_ACCESS_KEY" ] || AWSE="$AWSE -e AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY"
[ -z "$AWS_SESSION_TOKEN"     ] || AWSE="$AWSE -e AWS_SESSION_TOKEN=$AWS_SESSION_TOKEN"
[ -z "$AWS_DEFAULT_REGION"    ] || AWSE="$AWSE -e AWS_DEFAULT_REGION=$AWS_DEFAULT_REGION"
[ -z "$AWS_PROFILE"           ] || AWSE="$AWSE -e AWS_PROFILE=$AWS_PROFILE"
[ -z "$AWS_DEFAULT_PROFILE"   ] || AWSE="$AWSE -e AWS_DEFAULT_PROFILE=$AWS_DEFAULT_PROFILE"
[ -z "$AWS_CONFIG_FILE"       ] || AWSE="$AWSE -e AWS_CONFIG_FILE=$AWS_CONFIG_FILE"

docker run -it --rm \
  -v $HOME/.aws:/.aws \
  $AWSE \
  andreyk0/aws-logs /aws-logs "$@"
